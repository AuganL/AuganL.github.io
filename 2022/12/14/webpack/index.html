<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Croy">
    
    <title>
        
            关于webpack暴力笔记 |
        
        StephenX-hertz
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.jpg">
    
<link rel="stylesheet" href="/fontawesome/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/css/regular.min.css">

    
<link rel="stylesheet" href="/fontawesome/css/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/css/brands.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en"};
    KEEP.theme_config = {"toc":{"enable":false,"number":false,"expand_all":false,"init_open":false},"style":{"primary_color":"#0066cc","logo":"/images/logo.jpg","favicon":"/images/logo.jpg","avatar":"/images/logo.jpg","font_size":null,"font_family":null,"hover":{"shadow":false,"scale":false},"first_screen":{"enable":false,"header_transparent":false,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving.","font_color":null,"hitokoto":false},"scroll":{"progress_bar":false,"percent":false}},"local_search":{"enable":false,"preload":false},"code_copy":{},"code_block":{"tools":{"enable":false,"style":"default"},"highlight_theme":"default"},"side_tools":{},"pjax":{"enable":false},"lazyload":{"enable":false},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.7"},"waline":{"server_url":null,"reaction":false,"version":2}},"post":{"author_label":{"enable":true,"auto":true,"custom_label_list":["Trainee","Engineer","Architect"]},"word_count":{"enable":false,"wordcount":false,"min2read":false},"img_align":"left","copyright_info":false},"version":"3.5.2"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"};
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/images/logo.jpg">
                </a>
            
            <a class="logo-title" href="/">
               StephenX-hertz
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            <div class="article-title">
                <span class="title-hover-animation">关于webpack暴力笔记</span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/logo.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Croy</span>
                            
                                <span class="author-label">Lv2</span>
                            
                        </div>
                        <div class="meta-info">
                            
<div class="article-meta-info">
    <span class="article-date article-meta-item">
        
            <i class="fa-regular fa-calendar-plus"></i>&nbsp;
        
        <span class="pc">2022-12-14 11:42:36</span>
        <span class="mobile">2022-12-14 11:42</span>
    </span>
    
        <span class="article-update-date article-meta-item">
        <i class="fas fa-file-pen"></i>&nbsp;
        <span class="pc">2022-12-15 11:28:45</span>
    </span>
    
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E5%89%8D%E7%AB%AF/">前端</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/webpack/">webpack</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content keep-markdown-body">
                <h1 id="什么是webpack"><a href="#什么是webpack" class="headerlink" title="什么是webpack"></a>什么是webpack</h1><p>webpack是一种前端资源构建工具，一个静态模块打包器（module bundler）</p>
<p>在webpack角度看，前端的所有资源文件都会作为模板处理，webpack将工具模块的依赖关系进行静态分析，打包生成对应的静态资源。</p>
<h1 id="简述webpack的工作流程"><a href="#简述webpack的工作流程" class="headerlink" title="简述webpack的工作流程"></a>简述webpack的工作流程</h1><ul>
<li>首先我们需要为webpack的执行提供一个js文件作为打包入口文件</li>
<li>而作为一个入口文件，这个文件内就需要将需要进行打包的文件进行引入，例如图片资源、css样式资源等等</li>
<li>当我们执行相对于的命令开始进行打包的时候，webpack就会根据这个入口文件作为起点开始打包</li>
<li>然后webpack就会去解析这个入口文件内声明的需要打包的资源，然后在webpack内部生成一个依赖关系树状结构图</li>
<li>由于声明在入口文件内需要进行webpack打包的目标资源其内部也会存在需要进行打包的资源，所以webpack会以树形结构去将这些需要打包的依赖关系资源进行规划，然后生成一个关于该项目下的依赖关系树状结构图</li>
<li>当这个依赖关系树形结构图生成之后，webpack就会去根据这个树形结构中记录的资源进行引入到项目，生成一个东西，我们称为chunk。</li>
<li>在chunk生成成功之后，webpack就会去处理这个chunk，例如需要将less文件编译为css文件。这个处理的过程操作就称为”打包”。</li>
<li>执行成功打包操作之后，webpack会将打包结果”bundle”进行输出，打包完成。</li>
</ul>
<blockquote>
<p><strong>综上所述，webpack就是根据项目下提供给webpack的入口文件去得到项目内资源的依赖关系，然后内部生成一个依赖关系树状结构图，然后这个依赖关系一步步的对资源进行打包的过程。</strong></p>
</blockquote>
<h1 id="webpack的五个概念"><a href="#webpack的五个概念" class="headerlink" title="webpack的五个概念"></a>webpack的五个概念</h1><h2 id="Entry（入口）"><a href="#Entry（入口）" class="headerlink" title="Entry（入口）"></a>Entry（入口）</h2><p><strong>用于指示webpack以哪个文件作为起点进行打包分析建内部依赖图</strong></p>
<h2 id="Output（输出）"><a href="#Output（输出）" class="headerlink" title="Output（输出）"></a>Output（输出）</h2><p><strong>用于指示webpack打包后的资源bundles输出到哪里去，以及对bundles的命名</strong></p>
<h2 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h2><p><strong>由于webpack自身只理解JavaScript，但是我们需要webpack去打包的资源不止是js文件，所以我们需要提供一个东西让webpack去处理那些非JavaScript的资源，这就是Loader</strong></p>
<h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><p><strong>插件，可以用于执行一些范围较广的任务。插件的范围包括，从打包到优化、压缩，一直到重新定义环境变量等等</strong></p>
<h2 id="Mode"><a href="#Mode" class="headerlink" title="Mode"></a>Mode</h2><p>![截屏2022-03-09 上午8.03.00](&#x2F;Users&#x2F;carray&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;截屏2022-03-09 上午8.03.00.png)</p>
<h1 id="运行指令"><a href="#运行指令" class="headerlink" title="运行指令"></a>运行指令</h1><h2 id="开发模式"><a href="#开发模式" class="headerlink" title="开发模式"></a>开发模式</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack 打包入口文件路径  -o 打包输出路径  --<span class="built_in">mode</span>=development</span><br></pre></td></tr></table></figure>

<h2 id="生产模式"><a href="#生产模式" class="headerlink" title="生产模式"></a>生产模式</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack 打包入口文件路径  -o 打包输出路径  --<span class="built_in">mode</span>=production</span><br></pre></td></tr></table></figure>

<h1 id="webpack配置文件"><a href="#webpack配置文件" class="headerlink" title="webpack配置文件"></a>webpack配置文件</h1><ul>
<li>在项目同级目录下创建一个webpack-config.js,作为webpack的配置文件</li>
<li>该配置文件一般都包含有webpack五个概念的配置项</li>
<li>我们也是通过这个配置文件来定义相应的loader让webpack去对js文件以外的资源进行打包</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * webpack-config.js </span></span><br><span class="line"><span class="comment"> *      所有构建工具都是基于nodejs平台运行的~模块化默认采用commonjs</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//resolve来自于nodejs的一个模块，是用来拼接绝对路径的方法</span></span><br><span class="line"><span class="keyword">const</span> &#123;resolve&#125; =<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    <span class="attr">entry</span>:<span class="string">&#x27;./src/index.js&#x27;</span>,              <span class="comment">//入口起点路径</span></span><br><span class="line">    <span class="comment">//定义输出配置</span></span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">        <span class="attr">filename</span>:<span class="string">&#x27;build.js&#x27;</span>,              <span class="comment">//输出的文件名</span></span><br><span class="line">        <span class="comment">//__dirname 是nodejs的一个变量，代表当前文件所在目录的绝对路径</span></span><br><span class="line">        <span class="attr">path</span>:<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;build&#x27;</span>)     <span class="comment">//输出路径</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//loader的配置，让webpack处理除了js以外的资源</span></span><br><span class="line">    <span class="attr">module</span>:&#123;</span><br><span class="line">        <span class="attr">rules</span>:[</span><br><span class="line"></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//plugins的配置</span></span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">mode</span>:<span class="string">&#x27;development&#x27;</span></span><br><span class="line">    <span class="comment">//mode：&#x27;production&#x27;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h1><h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><p>当我们没有采用derserver类似的配置的时候，为了实现webpack打包的时候，当我们修改文件就自动重新打包，我们可以在webpack命令后加一个–watch</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --watch</span><br></pre></td></tr></table></figure>

<h1 id="devserver"><a href="#devserver" class="headerlink" title="devserver"></a>devserver</h1><p>实现devserver需要在对webpack.config.js配置文件进行配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加配置项</span></span><br><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line">	<span class="attr">static</span>:<span class="string">&#x27;./pack&#x27;</span>  <span class="comment">//配置static指向打包后的bundle的输出文件夹路径作为devserver的根路径</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>对于webpack-dev-server运行之后是没有真正去生成bundle文件的，而是把打包输出的bundle文件放到内存中运行</p>
</blockquote>
<blockquote>
<p><strong>添加了以上的devserver配置之后，我们通过命令行执行npx webpack-dev-server,可以看见在本地8080端口开启了一个服务，我们只需要在游览器访问该url就可以访问到打包后的bundle的根目录，如果我们在bundle的输出目录下存在app.html文件，我们只需要访问<a class="link"   target="_blank" rel="noopener" href="http://localhost:8080/app.html%EF%BC%8C%E5%8D%B3%E5%8F%AF%E8%AE%BF%E9%97%AE%E8%AF%A5html%E6%96%87%E4%BB%B6" >http://localhost:8080/app.html，即可访问该html文件<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>![截屏2022-03-16 上午9.08.03](&#x2F;Users&#x2F;carray&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;截屏2022-03-16 上午9.08.03.png)</p>
</blockquote>
<h1 id="资源模块"><a href="#资源模块" class="headerlink" title="资源模块"></a>资源模块</h1><p>资源模块(asset module)是一种模块类型，它允许使用资源文件（字体，图标等）而无需配置额外 loader。</p>
<p>在 <strong>webpack 5</strong> 之前，通常使用：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://v4.webpack.js.org/loaders/raw-loader/"><code>raw-loader</code></a> 将文件导入为字符串</li>
<li><a target="_blank" rel="noopener" href="https://v4.webpack.js.org/loaders/url-loader/"><code>url-loader</code></a> 将文件作为 data URI 内联到 bundle 中</li>
<li><a target="_blank" rel="noopener" href="https://v4.webpack.js.org/loaders/file-loader/"><code>file-loader</code></a> 将文件发送到输出目录</li>
</ul>
<p>资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader：</p>
<ul>
<li><code>asset/resource</code> 发送一个单独的文件并导出 URL。之前通过使用 <code>file-loader</code> 实现。</li>
<li><code>asset/inline</code> 导出一个资源的 data URI。之前通过使用 <code>url-loader</code> 实现。</li>
<li><code>asset/source</code> 导出资源的源代码。之前通过使用 <code>raw-loader</code> 实现。</li>
<li><code>asset</code> 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 <code>url-loader</code>，并且配置资源体积限制实现。</li>
</ul>
<p>当在 webpack 5 中使用旧的 assets loader（如 <code>file-loader</code>&#x2F;<code>url-loader</code>&#x2F;<code>raw-loader</code> 等）和 asset 模块时，你可能想停止当前 asset 模块的处理，并再次启动处理，这可能会导致 asset 重复，你可以通过将 asset 模块的类型设置为 <code>&#39;javascript/auto&#39;</code> 来解决。</p>
<h2 id="设置资源模块打包输出路径"><a href="#设置资源模块打包输出路径" class="headerlink" title="设置资源模块打包输出路径"></a>设置资源模块打包输出路径</h2><blockquote>
<p>只需要在output配置中添加配置项—&gt;assetModuleFilename</p>
</blockquote>
<p>![截屏2022-03-16 上午9.34.19_副本](&#x2F;Users&#x2F;carray&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;截屏2022-03-16 上午9.34.19_副本.png)</p>
<h1 id="抽离和压缩css"><a href="#抽离和压缩css" class="headerlink" title="抽离和压缩css"></a>抽离和压缩css</h1><h2 id="抽离css"><a href="#抽离css" class="headerlink" title="抽离css"></a>抽离css</h2><blockquote>
<ul>
<li>之前我们在webpac.config.js中配置的处理css的loader在经过webpack执行打包之后都会把css打包到对应的js文件中去，然后通过htmlwebpackplugin插件自动将该js文件通过script标签引入到我们指定给htmlwebpackplugin的模板html文件中去，从而实现对css的打包。</li>
<li>但是我们也可以的对打包的css之类的样式资源文件通过webpack打包之后抽离为一个单独的css文件，然后通过htmlwebpackplugin这个插件将该css文件通过link标签引入到html中。</li>
</ul>
</blockquote>
<p>大多数情况下，我也可以对css进行压缩，一边在生产环境中节省加载时间，同时还可以将css文件抽离成一个单独的文件，为了实现这个功能，我们需要在webpack项目下安装 <code>[mini-css-extract-plugin]</code>这个插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mini-css-extract-plugin -d</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>这个插件会将css提取到单独的文件中，为每个包含css的js文件创建一个css文件</li>
<li>也就是说，通过webpack配置打包的css资源文件会被打包单独打包抽离为一个单独的css文件，然后webpack会自动通过htmlwebpackplugin将这个被单独抽离抽离的打包完成的css文件在html的head里面引入。</li>
</ul>
<ol>
<li><p>首先就是要在项目下安装插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mini-css-extract-plugin -d</span><br></pre></td></tr></table></figure></li>
<li><p>然后然后就是要在webpack.config,js中引入和使用该插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;resolve&#125; =<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span>=<span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*	引入插件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span>=<span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    <span class="attr">entry</span>:<span class="string">&#x27;./src/index.js&#x27;</span>,              <span class="comment">//入口起点路径</span></span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">        <span class="attr">filename</span>:<span class="string">&#x27;pack.js&#x27;</span>,              <span class="comment">//输出的文件名</span></span><br><span class="line">        <span class="attr">path</span>:<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;pack&#x27;</span>),     <span class="comment">//输出路径</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>:&#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">              <span class="comment">//配置loader，调用MiniCssExtractPlugin对象的loader属性</span></span><br><span class="line">              <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>,<span class="string">&#x27;less-loader&#x27;</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">          <span class="attr">template</span>:<span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">     	 <span class="comment">//实例化该插件</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>()</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">mode</span>:<span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
<li><p>以上就是对css抽离的操作，在less-loader和css-loader对less样式资源处理之后MiniCssExtractPlugin插件对象的loader就会对样式资源进行抽离然后生成一个单独的css文件。</p>
</li>
</ol>
</blockquote>
<h2 id="抽离css的时候怎么自定义文件在输出目录的路径"><a href="#抽离css的时候怎么自定义文件在输出目录的路径" class="headerlink" title="抽离css的时候怎么自定义文件在输出目录的路径"></a>抽离css的时候怎么自定义文件在输出目录的路径</h2><p><strong>只需要在实例化MiniCssExtractPlugin对象的时候进行配置即可</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>:[</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">				<span class="comment">//表示将文件存放在输出目录下的styles中</span></span><br><span class="line">				<span class="attr">filename</span>:<span class="string">&#x27;styles/[contenthash][ext]&#x27;</span></span><br><span class="line">		&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="压缩css"><a href="#压缩css" class="headerlink" title="压缩css"></a>压缩css</h2><ul>
<li><p>安装插件css-minimizer-webpack-plugin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i css-minimizer-webpack-plugin  -d </span><br></pre></td></tr></table></figure></li>
<li><p>在webpack.config.js配置，首先引入该插件然后在optimization配置项中实例化，然后要吧mode的值修改为production</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;resolve&#125; =<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span>=<span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="comment">//引入css-minimizer-webpack-plugin</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CssMinimizerWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;css-minimizer-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*	引入插件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span>=<span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    <span class="attr">entry</span>:<span class="string">&#x27;./src/index.js&#x27;</span>,              <span class="comment">//入口起点路径</span></span><br><span class="line">    <span class="attr">output</span>:&#123;</span><br><span class="line">        <span class="attr">filename</span>:<span class="string">&#x27;pack.js&#x27;</span>,              <span class="comment">//输出的文件名</span></span><br><span class="line">        <span class="attr">path</span>:<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;pack&#x27;</span>),     <span class="comment">//输出路径</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>:&#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">              <span class="comment">//配置loader，调用MiniCssExtractPlugin对象的loader属性</span></span><br><span class="line">              <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&#x27;css-loader&#x27;</span>,<span class="string">&#x27;less-loader&#x27;</span>]</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">          <span class="attr">template</span>:<span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">     	 <span class="comment">//实例化该插件</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>()</span><br><span class="line">    ], </span><br><span class="line">  	<span class="comment">////////////////配置项在这</span></span><br><span class="line">    <span class="attr">mode</span>:<span class="string">&#x27;production&#x27;</span>，</span><br><span class="line">  	<span class="attr">optimization</span>:&#123;</span><br><span class="line">  		<span class="attr">minimizer</span>:[</span><br><span class="line">  			<span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>()</span><br><span class="line">  		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="代码分离"><a href="#代码分离" class="headerlink" title="代码分离"></a>代码分离</h1><p>使用webpack打包的时候进行代码分离，可以将webpack打包后输出的bundle分离成更小的bundle，从而可以实现对打包后资源的按需加载或者并行加载，同时也可以控制资源加载的优先级。</p>
<h2 id="代码分离的三种方式"><a href="#代码分离的三种方式" class="headerlink" title="代码分离的三种方式"></a>代码分离的三种方式</h2><ul>
<li>入口起点</li>
<li>防止重复</li>
<li>动态导入</li>
</ul>
<h2 id="入口起点（通过entry实现代码分离）"><a href="#入口起点（通过entry实现代码分离）" class="headerlink" title="入口起点（通过entry实现代码分离）"></a>入口起点（通过entry实现代码分离）</h2><p><strong>在webpack配置文件中配置entry配置项去手动的分离代码</strong>，但是由于在entry配置项配置了多个打包入口就会导致这些入口中的都引入了相同的文件以至于对文件打包的时候会对同一个同一个文件多次打包</p>
<p>![截屏2022-03-16 下午4.49.34](&#x2F;Users&#x2F;carray&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;截屏2022-03-16 下午4.49.34.png)</p>
<h2 id="防止重复"><a href="#防止重复" class="headerlink" title="防止重复"></a>防止重复</h2><p>由于采用在入口起点处配置entry实现代码分离会导致文件被重复打包，为了解决这一问题，可以在入口配置处使用Entry dependencise或者splitChunksPlugin对入口起点中的文件进行去重之后再执行打包</p>
<p>![截屏2022-03-16 下午5.21.56](&#x2F;Users&#x2F;carray&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;截屏2022-03-16 下午5.21.56.png)</p>
<h3 id="使用SplitChunksPlugin创建抽离出共享的js文件"><a href="#使用SplitChunksPlugin创建抽离出共享的js文件" class="headerlink" title="使用SplitChunksPlugin创建抽离出共享的js文件"></a>使用SplitChunksPlugin创建抽离出共享的js文件</h3><p><a target="_blank" rel="noopener" href="https://webpack.docschina.org/plugins/split-chunks-plugin"><code>SplitChunksPlugin</code></a> 插件可以将公共的依赖模块提取到已有的入口 chunk 中，或者提取到一个新生成的 chunk。</p>
<h2 id="动态导入"><a href="#动态导入" class="headerlink" title="动态导入"></a>动态导入</h2><p>通过模块的内联函数调用来分离代码</p>

            </div>

            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/%E5%89%8D%E7%AB%AF/">#前端</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/webpack/">#webpack</a>&nbsp;
                        </li>
                    
                </ul>
            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                               rel="prev"
                               href="/2022/12/15/react/"
                            >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                                <span class="title flex-center">
                                <span class="post-nav-title-item">React</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                            </a>
                        </div>
                    
                    
                </div>
            

            
        </div>

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            
<footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
                <span>2020</span> -
            
            2022
            
                &nbsp;<i class="fas fa-heart icon-animate"></i>
                &nbsp;<a href="/">Croy</a>
            
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.5.2</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>










<div class="post-scripts">
    
        
<script src="/js/post-helper.js"></script>

        
        
    
</div>



</body>
</html>
